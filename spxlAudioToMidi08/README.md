# spxlAudioToMidi06spxlAudioToMidi is a small tool made with [Processing](http://www.processing.org/ "Processing language and development environemnt") used to generated a set of MIDI control signals from an incoming audio sourcebased on a frequency analysis ([FFT](http://en.wikipedia.org/wiki/FFT "Fast Fourier Transform")). "Meters" are shown on the left, "monitors" on the right. Meters start with lowest frequency rangesat the top and highest frequency range at the bottom. Monitors produce MIDI "CC" messages starting with CC01 at the top and CC10 at the bottom.This frequency range order for the monitors may seem silly, but keeps everything in natural top-to-bottom reading and counting order.The tool depends upon two external libraries:* [Minim](http://code.compartmental.net/tools/minim/ "Minim audio library for Processing") (for the FFT analysis, included with Processing)* [proMIDI](http://creativecomputing.cc/p5libs/promidi/ "proMIDI library for Processing by Christian Riekoff") (for control and sending out the MIDI data).You will need to install the proMIDI library in the `libraries` subfolder of your *Sketchbook* folder, or otherwiseas later described by documentation for Processing.The mouse and keyboard controls are a little esoteric. Basically left-click the mouse (and drag) to do something,right-click the mouse to reset something.Find a full(er) description at the [spxlAudioToMidi page on subpixels.com](http://subpixels.com/processing/spxlAudioToMidi/)in case I don't get around to finishing here.### Mouse ControlsLeft-clicking (and optionally dragging) the upper portion of a "monitor" (box on the right side) sets the maximumoutput value; clicking the lower portion of a monitor sets the minimum output value. Maximum and minimum can bereversed so that the output from the monitor is inverted relative to the meter it is connected to.Right click a monitor to reset default full range (not inverted).Left-click near the left edge of a monitor (you will see a circle and a "Drag to meter" notice appear to let youknow you are in the target area), drag a connection to whichever meter (boxes on the left side) you wantand release. Right-click in that target area to the left of a monitor to reset the link to the default meter.### Keyboard ControlsKeyboard controls can be found in the spxlAudioToMidiXX.pde file, if not in the top comments, then in the `keyPressed()` method.The most 'exciting' controls are `R` (upper-case R) to randomise the output ranges of all the monitors, `S` to reset,and `Q` to randomise which meter all the monitors are connected to, `A` to reset.	[1/2/3/../9/0] set output MIDI channel	[!/@/#/../(/)] set input MIDI channel	[p/space] toggle pause	[m] toggle mute on/off	[l] reset meter levels	[E] toggle easing on/off	[e] reset easing value (and turn easing on)	[up] increase snappiness of easing	[down] decrease snappiness of easing	[q/Q] randomise link for monitor/s	[a/A] reset link to default for monitor/s	[f/F] flip min, max for monitor/s	[v/V] invert range for monitor/s	[r/R] random range for monitor/s	[s/S] reset range for monitor/s	[F1] toggle meters display	[F2] toggle monitors display	[h] toggle hex/decimal value display	[F3] Analyse microphone input	[F4] Analyse stereo mix	[[] Decrease expected CC numbers (by 20) and note pitches (by 2 octaves) for MIDI input	[]] Increase expected CC numbers (by 20) and note pitches (by 2 octaves) for MIDI input### MIDI ControlsYes, aside from generating MIDI for another application/device to use, this app can be controlled by MIDI!Serious limitations include the fact that you cannot do on-the-fly MIDI mapping (except for changing the base note / CC message using "[" and "]").Why is it this way? I spent some time remapping my Korg nanoKONTROL to output predictable MIDI notes and CC messages. Note that the nanoKONTROL has 4 "scenes" that you can cycle through).#### Scene 1* Sliders: CC	 01  02  03  04  05  06  07  08  09     CC:    0x01 to 0x09 / 01-09* Knobs:   CC    11  12  13  14  15  16  17  18  19     CC:    0x0B to 0x13 / 11-19* Upper buttons: C-0 C#0 D-0 D#0 E-0 F-0 F#0 G-0 G#0    Notes: 0x0C to 0x14 / 12-20* Lower buttons: A-0 A#0 B-0 C-1 C#1 D-1 D#1 E-1 F-1    Notes: 0x15 to 0x1D / 21-29#### Scene 2* Sliders: CC	 21  22  23  24  25  26  27  28  29     CC:    0x15 to 0x1D / 21-29* Knobs:   CC    31  32  33  34  35  36  37  38  39     CC:    0x1F to 0x27 / 31-39* Upper buttons: C-2 C#2 D-2 D#2 E-2 F-2 F#2 G-2 G#2    Notes: 0x24 to 0x2C / 36-44* Lower buttons: A-2 A#2 B-2 C-3 C#3 D-3 D#3 E-3 F-3    Notes: 0x2D to 0x35 / 45-53#### Scene 3* Sliders: CC	 41  42  43  44  45  46  47  48  49     CC: TODO...* Knobs:   CC    51  52  53  54  55  56  57  58  59     CC: TODO...* Upper buttons: C-4 C#4 D-4 D#4 E-4 F-4 F#4 G-4 G#4    Notes: 0x3C to 0x44 / 60-68* Lower buttons: A-4 A#4 B-4 C-5 C#5 D-5 D#5 E-5 F-5    Notes: 0x45 to 0x4D / 69-77#### Scene 4* Sliders: CC	 61  62  63  64  65  66  67  68  69     CC: TODO...* Knobs:   CC    71  72  73  74  75  76  77  78  79     CC: TODO...* Upper buttons: C-6 C#6 D-6 D#6 E-6 F-6 F#6 G-6 G#6    Notes: 0x54 to 0x5C / 84-91* Lower buttons: A-6 A#6 B-6 C-7 C#7 D-7 D#7 E-7 F-7    Notes: 0x5D to 0x65 / 63-101_____## Links* [Processing]: http://www.processing.org			"Processing language and development environemnt"* [FFT]: http://en.wikipedia.org/wiki/FFT			"Fast Fourier Transform"* [Minim]: http://code.compartmental.net/tools/minim/		"Minim audio library for Processing"* [proMidi]: http://creativecomputing.cc/p5libs/promidi/	"proMIDI library for Processing by Christian Riekoff"## Change notes* 2014-06-08 Sun - v08 subpixel	- Rejig MidiManager menu system:		Channel and device shown on one line		MIDI input and MIDI output selectable		Click channel number to get channel menu, click device name to get device menu* 2014-06-06 Fri - v07 subpixel	-Allow audio mixer to be chosen (F3 for Microphone, F4 for Stereo Mix)	- Show MIDI channel when device not chosen since channel can be changed before device chosen	- Implement MIDI input to control meter monitors* 2013-08-14 Wed - v06 subpixel	- MouseEvent changes for Processing 2.0 in spxlMeterMonitor, spxlMidiManager	- Rename "in" to "linein" for descriptiveness	- Update key controls for easing (up/down to adjust amount, e reset, E toggle)	- Remove dependency on java.awt.Point (use PVector instead)
# spxlAudioToMidi09spxlAudioToMidi is a small tool made with [Processing](http://www.processing.org/ "Processing language and development environemnt").It's purpose is to generate MIDI Control Change ("CC") messages from an incoming audio source based on frequency analysis(Fast Fourier Transform, [FFT](http://en.wikipedia.org/wiki/FFT "Fast Fourier Transform")).The main space of the display is a column of audio "Meters" on the left, and a column of meter "Monitors" on the right, with linesshowing connections between Meters and Monitors in between.The frequency ranges of the Meters increase going down the display (lowest frequency range at the top, highest range at the bottom).The 10 Monitors each produce MIDI CC messages starting with CC01 for the top Monitor through to CC10 for the bottom monitor. The values outputfor a CC message for a Monitor is the output of the Meter it is connected to, scaled to the range specified for the Monitor;the Meter range is between 0 (at the least) and 127 (at the most), and can be inverted. The output range for each Monitor can be adjusted usingthe mouse, and some keyboard commands (such as reset range, invert range, randomise range), and (as of v08) also by MIDI input.### Mouse ControlsThe mouse and keyboard controls are a little esoteric:* To change the frequency range for a Monitor: left-click near the left edge of the Monitor and drag to a Meter to set a connection; right-click to reset to the default Meter.* To set the upper value for a Monitor output: left-click (and optionally drag) within the Monitor area, not too close to the bottom edge; right-click to reset (to maximum, 127).* To set the lower value for a Monitor output: left-click (and optionally drag) within the Monitor area, close to the bottom edge; right-click to reset (to minimum, zero).* Operations on a Monitor: hover the mouse over a Monitor and use keyboard command:	* r - random range	* s - reset range (0 to 127)	* f - flip range (same bounds, upper and lower values exchanged)	* v - invert range (range is mirrored; new upper is 127 - old upper, new lower is 127 - old lower)	* q - random Meter connection	* a - reset Meter connection (to default for the Monitor)* Shift + above listed keyboard operations perform operations on all Monitors simulaneously (R, S, F, V, Q, A)### Keyboard ControlsKeyboard controls can be found in the spxlAudioToMidiXX.pde file, if not in the top comments, then in the `keyPressed()` method.The most 'exciting' controls are `R` (upper-case R) to randomise the output ranges of all the monitors, `S` to reset,and `Q` to randomise which meter all the monitors are connected to, `A` to reset.	[1/2/3/../9/0] set output MIDI channel	[!/@/#/../(/)] set input MIDI channel	[p/space] toggle pause	[m] toggle mute on/off	[M] mute shot (short burst followed by mute)	[l] reset meter levels	[E] toggle easing on/off	[e] reset easing value (and turn easing on)	[up] increase snappiness of easing	[down] decrease snappiness of easing	[q/Q] randomise link for monitor/s	[a/A] reset link to default for monitor/s	[f/F] flip min, max for monitor/s	[v/V] invert range for monitor/s	[r/R] random range for monitor/s	[s/S] reset range for monitor/s	[F1] toggle meters display	[F2] toggle monitors display	[h] toggle hex/decimal value display	[F3] Analyse microphone input	[F4] Analyse stereo mix	[[] Decrease expected CC numbers (by 20) and note pitches (by 2 octaves) for MIDI input	[]] Increase expected CC numbers (by 20) and note pitches (by 2 octaves) for MIDI input### MIDI ControlsYes, aside from generating MIDI for another application/device to use, this app can be controlled by MIDI!Serious limitations include the fact that you cannot do on-the-fly MIDI mapping (except for changing the base note / CC message using "[" and "]").Why is it this way? I spent some time remapping my Korg nanoKONTROL to output predictable MIDI notes and CC messages. Note that the nanoKONTROL has 4 "scenes" that you can cycle through.For each of the scenes:* each slider controls a Monitor maximum output value,* each knob controls a Monitor minimum output value,* the upper row of buttons selects a random Monitor ourput range (same as the 'r' keyboard command)* the lower row of buttons resets the Monitor output range (same as the 's' keyboard command)#### Scene 1* Sliders: CC	 01  02  03  04  05  06  07  08  09     CC:    0x01 to 0x09 / 01-09* Knobs:   CC    11  12  13  14  15  16  17  18  19     CC:    0x0B to 0x13 / 11-19* Upper buttons: C-0 C#0 D-0 D#0 E-0 F-0 F#0 G-0 G#0    Notes: 0x0C to 0x14 / 12-20* Lower buttons: A-0 A#0 B-0 C-1 C#1 D-1 D#1 E-1 F-1    Notes: 0x15 to 0x1D / 21-29#### Scene 2* Sliders: CC	 21  22  23  24  25  26  27  28  29     CC:    0x15 to 0x1D / 21-29* Knobs:   CC    31  32  33  34  35  36  37  38  39     CC:    0x1F to 0x27 / 31-39* Upper buttons: C-2 C#2 D-2 D#2 E-2 F-2 F#2 G-2 G#2    Notes: 0x24 to 0x2C / 36-44* Lower buttons: A-2 A#2 B-2 C-3 C#3 D-3 D#3 E-3 F-3    Notes: 0x2D to 0x35 / 45-53#### Scene 3* Sliders: CC	 41  42  43  44  45  46  47  48  49     CC:    0x29 to 0x31 / 41-49 * Knobs:   CC    51  52  53  54  55  56  57  58  59     CC:    0x33 to 0x3B / 51-59* Upper buttons: C-4 C#4 D-4 D#4 E-4 F-4 F#4 G-4 G#4    Notes: 0x3C to 0x44 / 60-68* Lower buttons: A-4 A#4 B-4 C-5 C#5 D-5 D#5 E-5 F-5    Notes: 0x45 to 0x4D / 69-77#### Scene 4* Sliders: CC	 61  62  63  64  65  66  67  68  69     CC:    0x3D to 0x45 / 61-69* Knobs:   CC    71  72  73  74  75  76  77  78  79     CC:    0x4& to 0x4E / 71-79* Upper buttons: C-6 C#6 D-6 D#6 E-6 F-6 F#6 G-6 G#6    Notes: 0x54 to 0x5C / 84-91* Lower buttons: A-6 A#6 B-6 C-7 C#7 D-7 D#7 E-7 F-7    Notes: 0x5D to 0x65 / 63-101#### Transport Control Buttons* Rewind:  CC    0x65 / 101  reset Meter links for all Monitors (same as 'A'; unfortunate clash with the last button in Scene 4...)* Play:    CC    0x66 / 102  toggle pause (same as 'p' or space)* FFWD:    CC    0x67 / 103  reset output ranges for all Monitors (same as 'S)* Loop:    CC    0x68 / 104  randomise Meter links for all Monitors (same as 'Q');* Stop:    CC    0x69 / 105  flip min/max for all Monitors (same as 'F')* Record:  CC    0x6A / 106  random output ranges for all Monitors (same as 'R')_____## Links* [Processing]: http://www.processing.org			"Processing language and development environemnt"* [FFT]: http://en.wikipedia.org/wiki/FFT			"Fast Fourier Transform"* [Minim]: http://code.compartmental.net/tools/minim/		"Minim audio library for Processing"* [proMidi]: http://creativecomputing.cc/p5libs/promidi/	"proMIDI library for Processing by Christian Riekoff"_____## Change notes* 2014-06-09 Sun - v09 subpixel	- MeterMonitor.displayInfo() for value changes / messages (especially helpful for MIDI control)	- New muteShot() command (key 'M')* 2014-06-08 Sun - v08 subpixel	- Rejig MidiManager menu system:		Channel and device shown on one line		MIDI input and MIDI output selectable		Click channel number to get channel menu, click device name to get device menu* 2014-06-06 Fri - v07 subpixel	-Allow audio mixer to be chosen (F3 for Microphone, F4 for Stereo Mix)	- Show MIDI channel when device not chosen since channel can be changed before device chosen	- Implement MIDI input to control meter monitors* 2013-08-14 Wed - v06 subpixel	- MouseEvent changes for Processing 2.0 in spxlMeterMonitor, spxlMidiManager	- Rename "in" to "linein" for descriptiveness	- Update key controls for easing (up/down to adjust amount, e reset, E toggle)	- Remove dependency on java.awt.Point (use PVector instead)